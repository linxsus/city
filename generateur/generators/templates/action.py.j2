"""Action générée: {{ nom }}"""

from actions.action import Action
{% if erreurs_verif_apres or erreurs_si_echec %}
from erreurs import {% for e in erreurs_verif_apres %}{{ e }}{% if not loop.last %}, {% endif %}{% endfor %}{% if erreurs_verif_apres and erreurs_si_echec %}, {% endif %}{% for e in erreurs_si_echec %}{{ e }}{% if not loop.last %}, {% endif %}{% endfor %}

{% endif %}


class {{ nom_classe }}(Action):
    """{{ description or 'Action personnalisée.' }}

    Exemple:
        {{ nom_classe }}(fenetre{% for p in params_with_defaults %}, {{ p.split(':')[0].strip() }}=...{% endfor %})
    """

    def __init__(self, fenetre{% if params_with_defaults %}, {{ params_with_defaults | join(', ') }}{% endif %}, **kwargs):
        {% if erreurs_verif_apres or erreurs_si_echec %}
        super().__init__(
            fenetre,
            {% if erreurs_verif_apres %}
            erreurs_verif_apres=[{% for e in erreurs_verif_apres %}{{ e }}{% if not loop.last %}, {% endif %}{% endfor %}],
            {% endif %}
            {% if erreurs_si_echec %}
            erreurs_si_echec=[{% for e in erreurs_si_echec %}{{ e }}{% if not loop.last %}, {% endif %}{% endfor %}],
            {% endif %}
            **kwargs
        )
        {% else %}
        super().__init__(fenetre, **kwargs)
        {% endif %}
        {% for init in params_init %}
        {{ init }}
        {% endfor %}
    {% if condition_code %}

    def condition(self):
        """Vérifie si l'action peut être exécutée."""
        if not super().condition():
            return False
        {{ condition_code | indent(8) }}
    {% endif %}

    def _run(self):
        """Exécute l'action."""
        {{ run_code | indent(8) }}
